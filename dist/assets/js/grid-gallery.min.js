"use strict";!function(t,e){function n(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function i(t,e,n){function i(){n.call(t)}var o=window.MutationObserver||window.WebKitMutationObserver,r=window.addEventListener;if(o){var d=new o(function(e){(e[0].addedNodes.length||e[0].removedNodes.length)&&n.call(t)}),a={childList:!0};d.observe(e,a)}else r&&(e.addEventListener("DOMNodeInserted",i,!1),e.addEventListener("DOMNodeRemoved",i,!1))}function o(t){var e=Array.prototype.filter.call(t,function(t){var e=new RegExp("grid-gallery__item");if(!t.dataset.grid&&e.test(t.className))return t});if(e.length)return e}function r(t){return Array.prototype.map.call(t,function(t){return t.dataset.grid="",t})}function d(t,e){var n=Math.floor(t/e);return t-e*n}function a(t){var e,n,i=t[0].parentNode.getBoundingClientRect(),o=Math.floor(i.width/t[0].offsetWidth),r=[],a=d(i.width,t[0].offsetWidth),s=t.map(function(t,n,i){if(0===n)t.dataset.top=0,t.dataset.left=a/2,t.style.top=0,t.style.left=a/2+"px",r[0]={top:t.offsetHeight,left:0};else if(n<o)e=i[n-1],t.dataset.top=0,t.dataset.left=Number(e.dataset.left)+e.offsetWidth,t.style.top=0,t.style.left=Number(e.dataset.left)+e.offsetWidth+"px",r[n]={top:t.offsetHeight,left:Number(t.dataset.left)};else if(n%o<=r.length){var d=n%o;t.dataset.top=r[d].top,t.dataset.left=d?r[d].left:a/2,t.style.top=r[d].top+"px",t.style.left=d?r[d].left+"px":a/2+"px",r[d]={top:Number(t.dataset.top)+t.offsetHeight,left:Number(t.dataset.left)}}t.dataset.grid=!0});return n=r.reduce(function(t,e){return t>e.top?t:t=e.top},r[0].top),t[0].parentNode.style.height=n+"px",s}function s(t,e){var i={lightBox:!1};this.element=t,this.options=n({},i),this.options=n(this.options,e),this.init()}s.prototype.init=function(){function t(){clearTimeout(e),e=setTimeout(function(){n.update()},250)}var e,n=this;a(o(this.element.children)),window.addEventListener("resize",t),i(this,this.element,this.update)},s.prototype.update=function(){r(this.element.querySelectorAll(".grid-gallery__item")),a(o(this.element.children))},s.prototype.__test__={extend:n,checkItems:o,calWhiteSpace:d,enableItems:a,disableAll:r},"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=s:"function"==typeof define&&define.amd?define([],function(){return s}):e.GridGallery=s}(document,window);